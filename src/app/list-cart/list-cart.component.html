<ng-container *ngIf="(cartItemsFiltered$ | async) as items">
    <div class="basket" *ngIf="!!items?.length">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>Shopping Cart</mat-panel-title>
                <mat-panel-description>{{items?.length || 0}}</mat-panel-description>
            </mat-expansion-panel-header>
            <ng-template matExpansionPanelContent>
                <ul class="items">
                    <li class="item" *ngFor="let item of items; trackBy: trackByItemID" tabindex="0">
                        <app-list-item [item]="item">
                            <button mat-icon-button color="accent" (click)="removeFromCart(item)" type="button"
                                matTooltip="Remove item from shopping cart">
                                <mat-icon svgIcon="checkbox-filled"></mat-icon>
                            </button>
                        </app-list-item>
                    </li>
                </ul>
                <div class="cart-actions">
                    <button mat-raised-button class="clear" type="button" (click)="clearCart()"
                        matTooltip="Clear shopping cart, moving items to main list">Clear</button>
                    <button mat-raised-button class="checkout" color="accent" type="button" (click)="checkout()"
                        matTooltip="Checkout all cart items moving them to the 'have' list">Checkout</button>
                </div>
            </ng-template>
        </mat-expansion-panel>
    </div>
</ng-container>

<div>
    <span>x</span>
    <span>{{item?.quantity || 1}}</span>
    <button mat-icon-button matTooltip="item options" [matMenuTriggerFor]="itemMenu"
        aria-label="Reveal additional options related to the item" class="options">
        <mat-icon color="accent" svgIcon="options"></mat-icon>
    </button>
    <mat-menu #itemMenu="matMenu">
        <button mat-menu-item (click)="toggleObtained(item)" matTooltip="Switch the item between 'have' & 'need' list">
            <mat-icon svgIcon="edit"></mat-icon><span>{{ item.obtained ? 'I Need This' : 'I Have This' }}</span>
        </button>
        <button mat-menu-item (click)="openEditDialog(item)"
            aria-label="Open a dialog for the item with editable fields">
            <mat-icon svgIcon="edit"></mat-icon><span>Edit Item</span>
        </button>
        <button mat-menu-item (click)="deleteItem(item)">
            <mat-icon svgIcon="trash"></mat-icon><span>Remove Item</span>
        </button>
    </mat-menu>
</div>